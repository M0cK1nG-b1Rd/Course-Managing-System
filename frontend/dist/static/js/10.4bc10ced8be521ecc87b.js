webpackJsonp([10],{"/M/F":function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r("Xxa5"),l=r.n(t),a=r("exGp"),o=r.n(a),i=r("QqOR"),s=r("UKzA"),c={name:"Home",data:function(){return{query:{nameSearch:"",currentPage:1,pageSize:5},total:0,Height:0,tableData:[],nameSearch:"",multipleSelection:[],isShow:!1,uploadVisible:!1,form:{},id:-1,deleteDialogVisible:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(s.d)(this.query).then(function(n){e.tableData=n.data,n.data&&(e.total=n.data.length)})},handlerClose:function(){this.$set(this.query,"currentPage",1),this.getData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.query.currentPage=1,this.query.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.query.currentPage=e},uploadFiles:function(){this.uploadVisible=!0},downloadHandle:function(e,n){var t=this;return o()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loadingOverLay=t.$loading({lock:!0,text:"文件生成中",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"}),Object(s.b)(n).then(function(e){r("3UNf")(e,n.filename)}),(a=document.createElement("iframe")).style.display="none",document.body.appendChild(a),t.loadingOverLay.close();case 6:case"end":return e.stop()}},e,t)}))()},deleteHandle:function(e,n){var r=Object(s.a)(n);console.log(r),r.data=1,r.data>0?(this.$message.success("删除成功"),this.tableData.splice(e,1)):this.$message.error("删除失败")},handleDialogClose:function(){this.deleteDialogVisible=!1},mySlice:function(e){return 0!==e.length?e.slice((this.query.currentPage-1)*this.query.pageSize,this.query.currentPage*this.query.pageSize):null}},mounted:function(){var e=this;this.Height=document.documentElement.clientHeight-120,window.onresize=function(){e.Height=document.documentElement.clientHeight-120}},components:{UploadBigFile:i.default}},d=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("el-container",[r("el-header",{staticStyle:{"text-align":"left"}},[r("div",{staticClass:"el-icon-folder",style:{Height:e.Height+"px"}},[e._v("PM管理系统-文件下载中心")])]),e._v(" "),r("el-main",{style:{minHeight:e.Height+"px"}},[r("router-view"),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mySlice(this.tableData)}},[e.isShow?r("el-table-column",{attrs:{prop:"id",label:"ID",width:"120",align:"center"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{prop:"refProjectId",label:"项目ID",width:"80",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"filename",label:"文件名",width:"200","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"totalSizeName",label:"文件大小",width:"200"}}),e._v(" "),e.isShow?r("el-table-column",{attrs:{prop:"location",label:"location",align:"center"}}):e._e(),e._v(" "),e.isShow?r("el-table-column",{attrs:{prop:"identifier",label:"identifier",align:"center"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{prop:"uploadTimeString",label:"上传时间",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[r("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-download",size:"small"},on:{click:function(r){return e.downloadHandle(n.$index,n.row)}}},[e._v("下载")]),e._v(" "),r("el-popconfirm",{attrs:{title:"确定删除该文件吗？"},on:{confirm:function(r){return e.deleteHandle(n.$index,n.row)}}},[r("el-button",{staticClass:"red",attrs:{slot:"reference",type:"text",icon:"el-icon-delete",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),r("el-pagination",{attrs:{align:"center",background:"","current-page":e.query.currentPage,"page-sizes":[1,5,10,20],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"文件上传",center:"",visible:e.uploadVisible,width:"60%",close:e.handlerClose},on:{"update:visible":function(n){e.uploadVisible=n}}},[r("UploadBigFile",{staticClass:"uploadSlot"})],1),e._v(" "),r("el-footer",[r("li",{staticClass:"mr-3 mr-lg-0"},[e._v("© 2020 项目管理, Inc.All rights reserved.")])])],1)};d._withStripped=!0;var u={render:d,staticRenderFns:[]},p=u;var g=!1;var h=r("VU/8")(c,p,!1,function(e){g||(r("3n/3"),r("Frw8"))},"data-v-25356852",null);h.options.__file="src/views/docs/Download.vue";n.default=h.exports},"3UNf":function(e,n){e.exports=function(e,n,r,t){var l=new Blob(void 0!==t?[t,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(l,n);else{var a=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(l):window.webkitURL.createObjectURL(l),o=document.createElement("a");o.style.display="none",o.href=a,o.setAttribute("download",n),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout(function(){document.body.removeChild(o),window.URL.revokeObjectURL(a)},200)}}},"3n/3":function(e,n,r){var t=r("zCZk");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("4051e6e6",t,!1,{})},Frw8:function(e,n,r){var t=r("dwJg");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("1dd701c3",t,!1,{})},dwJg:function(e,n,r){(e.exports=r("FZ+f")(!0)).push([e.i,"\n.handle-box[data-v-25356852] {\r\n  margin-top: -20px;\r\n  margin-bottom: 0px;\n}\n.uploadSlot[data-v-25356852] {\r\n  margin: -10px 10px 10px 30px;\n}\n.red[data-v-25356852] {\r\n  color: #ff0000;\n}\n.mr10[data-v-25356852] {\r\n  margin-right: 10px;\n}\r\n","",{version:3,sources:["C:/Users/shinelon/Desktop/Course-Managing-System/frontend/src/views/docs/src/views/docs/Download.vue"],names:[],mappings:";AAoQA;EACA,kBAAA;EACA,mBAAA;CACA;AACA;EACA,6BAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,mBAAA;CACA",file:"Download.vue",sourcesContent:['<template>\r\n<el-container>\r\n  <el-header style="text-align: left">    \x3c!--文字居左--\x3e\r\n    <div class="el-icon-folder" :style="{Height: Height + \'px\'}">PM管理系统-文件下载中心</div>\r\n\r\n  </el-header>\r\n  <el-main v-bind:style="{minHeight: Height+\'px\'}"><router-view/>\r\n\r\n\r\n\x3c!--    table主要区域   --\x3e\r\n    <el-table :data="mySlice(this.tableData)" style="width: 100%">\r\n      <el-table-column  prop="id" label="ID" width="120" align="center" v-if="isShow">\r\n      </el-table-column>\r\n      <el-table-column  prop="refProjectId" label="项目ID" width="80" align="center">\r\n      </el-table-column>\r\n      <el-table-column prop="filename" label="文件名" width="200" show-overflow-tooltip>\x3c!--tooltip表格列内容过长时显示提示--\x3e\r\n      </el-table-column>\r\n      <el-table-column prop="totalSizeName" label="文件大小" width="200">\r\n      </el-table-column>\r\n      <el-table-column prop="location" label="location" align="center" v-if="isShow">\r\n      </el-table-column>\r\n      <el-table-column prop="identifier" label="identifier" align="center" v-if="isShow">\r\n      </el-table-column>\r\n      <el-table-column prop="uploadTimeString" label="上传时间" width="200">\r\n      </el-table-column>\r\n      <el-table-column fixed="right" label="操作" align="center">\r\n        <template slot-scope="scope">\r\n          <el-button\r\n              type="text"\r\n              icon="el-icon-download"\r\n              class="blue"\r\n              @click="downloadHandle(scope.$index, scope.row)" size="small">下载</el-button>\r\n          <el-popconfirm\r\n            title="确定删除该文件吗？"\r\n            @confirm="deleteHandle(scope.$index, scope.row)"\r\n          >\r\n            <el-button\r\n              type="text"\r\n              icon="el-icon-delete"\r\n              class="red"\r\n              slot="reference"\r\n              size="small">删除</el-button>\r\n\r\n          </el-popconfirm>\r\n\r\n\x3c!--              删除文件时弹出的警告对话框--\x3e\r\n\x3c!--          <el-dialog--\x3e\r\n\x3c!--            title="提示"--\x3e\r\n\x3c!--            :visible.sync="deleteDialogVisible"--\x3e\r\n\x3c!--            :before-close="handleDialogClose"--\x3e\r\n\x3c!--            width="30%">--\x3e\r\n\x3c!--            <span>文件删除后不可恢复，您确定需要删除吗？</span>--\x3e\r\n\x3c!--            <span slot="footer" class="dialog-footer">--\x3e\r\n\x3c!--              <el-button @click="deleteDialogVisible = false">取 消</el-button>--\x3e\r\n\x3c!--              <el-button type="primary" @click="deleteHandle(scope.$index, scope.row)">确 定</el-button>--\x3e\r\n\x3c!--            </span>--\x3e\r\n\x3c!--          </el-dialog>--\x3e\r\n\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n\r\n\r\n\r\n    \x3c!--  table主要区域结束  --\x3e\r\n\r\n    \x3c!--  分页 begin   --\x3e\r\n    \x3c!--page-size设置每页几条数据--\x3e\r\n    \x3c!--:total设置共几条数据--\x3e\r\n    \x3c!--@current-change设置方法绑定点击页码事件--\x3e\r\n    \x3c!--设置分页显示功能--\x3e\r\n    <el-pagination align="center"\r\n                   background\r\n                   @size-change="handleSizeChange"\r\n                   @current-change="handleCurrentChange"\r\n                   :current-page="query.currentPage"\r\n                   :page-sizes="[1,5,10,20]"\r\n                   :page-size="query.pageSize"\r\n                   layout="total, sizes, prev, pager, next, jumper"\r\n                   :total="total">\r\n\r\n    </el-pagination>\r\n    \x3c!--   分页  end   --\x3e\r\n\r\n  </el-main>\r\n  \x3c!--   主体内容结束     --\x3e\r\n\r\n  \x3c!--上传附件弹出框 --\x3e\r\n  <el-dialog v-dialogDrag title="文件上传" center :visible.sync="uploadVisible" width="60%" :close="handlerClose">\r\n    <UploadBigFile class="uploadSlot"></UploadBigFile>\r\n  </el-dialog>\r\n\r\n  <el-footer>\r\n    <li class="mr-3 mr-lg-0">© 2020 项目管理, Inc.All rights reserved.</li>\r\n  </el-footer>\r\n</el-container>\r\n</template>\r\n<style>\r\n.el-header, .el-footer {\r\n  background-color: #B3C0D1;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 60px;\r\n}\r\n\r\n.el-main {\r\n  background-color: #E9EEF3;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 80px;\r\n}\r\n.el-container {\r\n  height: 100%;\r\n}\r\nbody > .el-container {\r\n  margin-bottom: 40px;\r\n}\r\n\r\n</style>\r\n\r\n<script>\r\nimport UploadBigFile from \'./Upload\';\r\nimport {selectFileList, deleteFile,downloadFile} from "@/api/modules/uploadFile";\r\n\r\n\r\nexport default {\r\n  name: \'Home\',\r\n  data() {\r\n    // const item = {\r\n    //   id: 1,\r\n    //   filename: \'板坯识别111111111111111111\',\r\n    //   total_size: \'原晓琴\',\r\n    //   upload_time: \'2016-05-02\',\r\n    // };\r\n    return {\r\n      query: {\r\n        nameSearch: \'\',\r\n        currentPage: 1,//当前页码\r\n        pageSize: 5,   //每页5条数据\r\n      },\r\n      total: 0,\r\n      Height: 0,       //固定底部不随主题内容上下浮动\r\n      //tableData: Array(7).fill(item),    //填充测试数据\r\n      tableData: [],\r\n      nameSearch: \'\',\r\n      multipleSelection: [],\r\n      isShow: false,\r\n      uploadVisible: false,\r\n      form: {},\r\n      id: -1,\r\n      // 删除文件时警示框的可见性\r\n      deleteDialogVisible: false\r\n    };\r\n  },\r\n  //  初始化\r\n  created() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    //从后台获取文件列表\r\n    getData() {\r\n      selectFileList(this.query).then(res => {\r\n        this.tableData = res.data;\r\n        if(res.data)\r\n        this.total = res.data.length;\r\n      })\r\n    },\r\n\r\n    // 关闭上传文件弹出框时触发\r\n    handlerClose(){\r\n      this.$set(this.query, \'currentPage\', 1);\r\n      this.getData();\r\n    },\r\n\r\n    //每页条数改变时触发 选择一页显示多少行\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.query.currentPage = 1;\r\n      this.query.pageSize = val;\r\n    },\r\n    //当前页改变时触发 跳转其他页\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.query.currentPage = val;\r\n    },\r\n    uploadFiles(){\r\n      this.uploadVisible = true;\r\n    },\r\n\r\n    //下载文件操作\r\n    async downloadHandle(index, row) {\r\n      this.loadingOverLay = this.$loading({\r\n        lock: true,\r\n        text: \'文件生成中\',\r\n        spinner: \'el-icon-loading\',\r\n        background: \'rgba(0,0,0,0.7)\'\r\n      });\r\n      downloadFile(row).then(\r\n        res => {\r\n          // 创建Blob对象，设置文件类型\r\n          // window.location.herf="www.baidu.com";\r\n          let fileDownload = require(\'js-file-download\');\r\n          fileDownload(res, row.filename);\r\n          /*let blob = new Blob([res],{type: "image/jpeg"})\r\n          let objectUrl = URL.createObjectURL(blob) // 创建URL\r\n          location.href = objectUrl\r\n          URL.revokeObjectURL(objectUrl); // 释放内存*/\r\n          //fileDownload(res.data, "he.png");\r\n        // this.tableData = res.data;\r\n        // this.total = res.data.length;\r\n      })\r\n\r\n      var elemIF = document.createElement(\'iframe\');\r\n\r\n      //elemIF.src = `http://${process.env.BACKEND_API_HOST}`+\'/uploader/download?id=\'+row.id+\'&filename=\'+row.filename+\'&location=\'+row.location;\r\n      elemIF.style.display =\'none\';\r\n      document.body.appendChild(elemIF);\r\n      this.loadingOverLay.close();\r\n    },\r\n\r\n    //删除文件操作\r\n    deleteHandle(index, row) {\r\n      let result =  deleteFile(row);\r\n      console.log(result);\r\n      result.data=1;\r\n      if (result.data > 0) {\r\n        this.$message.success(\'删除成功\');\r\n        this.tableData.splice(index, 1);\r\n      }else{\r\n        this.$message.error(\'删除失败\');\r\n      }\r\n    },\r\n\r\n    // 关闭删除文件警示对话框时调用\r\n    handleDialogClose(){\r\n        this.deleteDialogVisible = false\r\n    },\r\n\r\n    mySlice(tableData){\r\n      if(tableData.length!==0){\r\n        return tableData.slice((this.query.currentPage-1)*this.query.pageSize, this.query.currentPage * this.query.pageSize)\r\n      }else{return null}\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n    //动态设置内容高度，让footer始终置底  120是header+footer高度\r\n    this.Height = document.documentElement.clientHeight - 120;\r\n    //监听浏览器窗口变化\r\n    window.onresize = () => {this.Height = document.documentElement.clientHeight - 120}\r\n  },\r\n\r\n  components: {\r\n    UploadBigFile\r\n  }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n  margin-top: -20px;\r\n  margin-bottom: 0px;\r\n}\r\n.uploadSlot {\r\n  margin: -10px 10px 10px 30px;\r\n}\r\n.red {\r\n  color: #ff0000;\r\n}\r\n.mr10 {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},zCZk:function(e,n,r){(e.exports=r("FZ+f")(!0)).push([e.i,"\n.el-header, .el-footer {\r\n  background-color: #B3C0D1;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 60px;\n}\n.el-main {\r\n  background-color: #E9EEF3;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 80px;\n}\n.el-container {\r\n  height: 100%;\n}\nbody > .el-container {\r\n  margin-bottom: 40px;\n}\r\n\r\n","",{version:3,sources:["C:/Users/shinelon/Desktop/Course-Managing-System/frontend/src/views/docs/src/views/docs/Download.vue"],names:[],mappings:";AAmGA;EACA,0BAAA;EACA,YAAA;EACA,mBAAA;EACA,kBAAA;CACA;AAEA;EACA,0BAAA;EACA,YAAA;EACA,mBAAA;EACA,kBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;EACA,oBAAA;CACA",file:"Download.vue",sourcesContent:['<template>\r\n<el-container>\r\n  <el-header style="text-align: left">    \x3c!--文字居左--\x3e\r\n    <div class="el-icon-folder" :style="{Height: Height + \'px\'}">PM管理系统-文件下载中心</div>\r\n\r\n  </el-header>\r\n  <el-main v-bind:style="{minHeight: Height+\'px\'}"><router-view/>\r\n\r\n\r\n\x3c!--    table主要区域   --\x3e\r\n    <el-table :data="mySlice(this.tableData)" style="width: 100%">\r\n      <el-table-column  prop="id" label="ID" width="120" align="center" v-if="isShow">\r\n      </el-table-column>\r\n      <el-table-column  prop="refProjectId" label="项目ID" width="80" align="center">\r\n      </el-table-column>\r\n      <el-table-column prop="filename" label="文件名" width="200" show-overflow-tooltip>\x3c!--tooltip表格列内容过长时显示提示--\x3e\r\n      </el-table-column>\r\n      <el-table-column prop="totalSizeName" label="文件大小" width="200">\r\n      </el-table-column>\r\n      <el-table-column prop="location" label="location" align="center" v-if="isShow">\r\n      </el-table-column>\r\n      <el-table-column prop="identifier" label="identifier" align="center" v-if="isShow">\r\n      </el-table-column>\r\n      <el-table-column prop="uploadTimeString" label="上传时间" width="200">\r\n      </el-table-column>\r\n      <el-table-column fixed="right" label="操作" align="center">\r\n        <template slot-scope="scope">\r\n          <el-button\r\n              type="text"\r\n              icon="el-icon-download"\r\n              class="blue"\r\n              @click="downloadHandle(scope.$index, scope.row)" size="small">下载</el-button>\r\n          <el-popconfirm\r\n            title="确定删除该文件吗？"\r\n            @confirm="deleteHandle(scope.$index, scope.row)"\r\n          >\r\n            <el-button\r\n              type="text"\r\n              icon="el-icon-delete"\r\n              class="red"\r\n              slot="reference"\r\n              size="small">删除</el-button>\r\n\r\n          </el-popconfirm>\r\n\r\n\x3c!--              删除文件时弹出的警告对话框--\x3e\r\n\x3c!--          <el-dialog--\x3e\r\n\x3c!--            title="提示"--\x3e\r\n\x3c!--            :visible.sync="deleteDialogVisible"--\x3e\r\n\x3c!--            :before-close="handleDialogClose"--\x3e\r\n\x3c!--            width="30%">--\x3e\r\n\x3c!--            <span>文件删除后不可恢复，您确定需要删除吗？</span>--\x3e\r\n\x3c!--            <span slot="footer" class="dialog-footer">--\x3e\r\n\x3c!--              <el-button @click="deleteDialogVisible = false">取 消</el-button>--\x3e\r\n\x3c!--              <el-button type="primary" @click="deleteHandle(scope.$index, scope.row)">确 定</el-button>--\x3e\r\n\x3c!--            </span>--\x3e\r\n\x3c!--          </el-dialog>--\x3e\r\n\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n\r\n\r\n\r\n    \x3c!--  table主要区域结束  --\x3e\r\n\r\n    \x3c!--  分页 begin   --\x3e\r\n    \x3c!--page-size设置每页几条数据--\x3e\r\n    \x3c!--:total设置共几条数据--\x3e\r\n    \x3c!--@current-change设置方法绑定点击页码事件--\x3e\r\n    \x3c!--设置分页显示功能--\x3e\r\n    <el-pagination align="center"\r\n                   background\r\n                   @size-change="handleSizeChange"\r\n                   @current-change="handleCurrentChange"\r\n                   :current-page="query.currentPage"\r\n                   :page-sizes="[1,5,10,20]"\r\n                   :page-size="query.pageSize"\r\n                   layout="total, sizes, prev, pager, next, jumper"\r\n                   :total="total">\r\n\r\n    </el-pagination>\r\n    \x3c!--   分页  end   --\x3e\r\n\r\n  </el-main>\r\n  \x3c!--   主体内容结束     --\x3e\r\n\r\n  \x3c!--上传附件弹出框 --\x3e\r\n  <el-dialog v-dialogDrag title="文件上传" center :visible.sync="uploadVisible" width="60%" :close="handlerClose">\r\n    <UploadBigFile class="uploadSlot"></UploadBigFile>\r\n  </el-dialog>\r\n\r\n  <el-footer>\r\n    <li class="mr-3 mr-lg-0">© 2020 项目管理, Inc.All rights reserved.</li>\r\n  </el-footer>\r\n</el-container>\r\n</template>\r\n<style>\r\n.el-header, .el-footer {\r\n  background-color: #B3C0D1;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 60px;\r\n}\r\n\r\n.el-main {\r\n  background-color: #E9EEF3;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 80px;\r\n}\r\n.el-container {\r\n  height: 100%;\r\n}\r\nbody > .el-container {\r\n  margin-bottom: 40px;\r\n}\r\n\r\n</style>\r\n\r\n<script>\r\nimport UploadBigFile from \'./Upload\';\r\nimport {selectFileList, deleteFile,downloadFile} from "@/api/modules/uploadFile";\r\n\r\n\r\nexport default {\r\n  name: \'Home\',\r\n  data() {\r\n    // const item = {\r\n    //   id: 1,\r\n    //   filename: \'板坯识别111111111111111111\',\r\n    //   total_size: \'原晓琴\',\r\n    //   upload_time: \'2016-05-02\',\r\n    // };\r\n    return {\r\n      query: {\r\n        nameSearch: \'\',\r\n        currentPage: 1,//当前页码\r\n        pageSize: 5,   //每页5条数据\r\n      },\r\n      total: 0,\r\n      Height: 0,       //固定底部不随主题内容上下浮动\r\n      //tableData: Array(7).fill(item),    //填充测试数据\r\n      tableData: [],\r\n      nameSearch: \'\',\r\n      multipleSelection: [],\r\n      isShow: false,\r\n      uploadVisible: false,\r\n      form: {},\r\n      id: -1,\r\n      // 删除文件时警示框的可见性\r\n      deleteDialogVisible: false\r\n    };\r\n  },\r\n  //  初始化\r\n  created() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    //从后台获取文件列表\r\n    getData() {\r\n      selectFileList(this.query).then(res => {\r\n        this.tableData = res.data;\r\n        if(res.data)\r\n        this.total = res.data.length;\r\n      })\r\n    },\r\n\r\n    // 关闭上传文件弹出框时触发\r\n    handlerClose(){\r\n      this.$set(this.query, \'currentPage\', 1);\r\n      this.getData();\r\n    },\r\n\r\n    //每页条数改变时触发 选择一页显示多少行\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.query.currentPage = 1;\r\n      this.query.pageSize = val;\r\n    },\r\n    //当前页改变时触发 跳转其他页\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.query.currentPage = val;\r\n    },\r\n    uploadFiles(){\r\n      this.uploadVisible = true;\r\n    },\r\n\r\n    //下载文件操作\r\n    async downloadHandle(index, row) {\r\n      this.loadingOverLay = this.$loading({\r\n        lock: true,\r\n        text: \'文件生成中\',\r\n        spinner: \'el-icon-loading\',\r\n        background: \'rgba(0,0,0,0.7)\'\r\n      });\r\n      downloadFile(row).then(\r\n        res => {\r\n          // 创建Blob对象，设置文件类型\r\n          // window.location.herf="www.baidu.com";\r\n          let fileDownload = require(\'js-file-download\');\r\n          fileDownload(res, row.filename);\r\n          /*let blob = new Blob([res],{type: "image/jpeg"})\r\n          let objectUrl = URL.createObjectURL(blob) // 创建URL\r\n          location.href = objectUrl\r\n          URL.revokeObjectURL(objectUrl); // 释放内存*/\r\n          //fileDownload(res.data, "he.png");\r\n        // this.tableData = res.data;\r\n        // this.total = res.data.length;\r\n      })\r\n\r\n      var elemIF = document.createElement(\'iframe\');\r\n\r\n      //elemIF.src = `http://${process.env.BACKEND_API_HOST}`+\'/uploader/download?id=\'+row.id+\'&filename=\'+row.filename+\'&location=\'+row.location;\r\n      elemIF.style.display =\'none\';\r\n      document.body.appendChild(elemIF);\r\n      this.loadingOverLay.close();\r\n    },\r\n\r\n    //删除文件操作\r\n    deleteHandle(index, row) {\r\n      let result =  deleteFile(row);\r\n      console.log(result);\r\n      result.data=1;\r\n      if (result.data > 0) {\r\n        this.$message.success(\'删除成功\');\r\n        this.tableData.splice(index, 1);\r\n      }else{\r\n        this.$message.error(\'删除失败\');\r\n      }\r\n    },\r\n\r\n    // 关闭删除文件警示对话框时调用\r\n    handleDialogClose(){\r\n        this.deleteDialogVisible = false\r\n    },\r\n\r\n    mySlice(tableData){\r\n      if(tableData.length!==0){\r\n        return tableData.slice((this.query.currentPage-1)*this.query.pageSize, this.query.currentPage * this.query.pageSize)\r\n      }else{return null}\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n    //动态设置内容高度，让footer始终置底  120是header+footer高度\r\n    this.Height = document.documentElement.clientHeight - 120;\r\n    //监听浏览器窗口变化\r\n    window.onresize = () => {this.Height = document.documentElement.clientHeight - 120}\r\n  },\r\n\r\n  components: {\r\n    UploadBigFile\r\n  }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n  margin-top: -20px;\r\n  margin-bottom: 0px;\r\n}\r\n.uploadSlot {\r\n  margin: -10px 10px 10px 30px;\r\n}\r\n.red {\r\n  color: #ff0000;\r\n}\r\n.mr10 {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n'],sourceRoot:""}])}});
//# sourceMappingURL=10.4bc10ced8be521ecc87b.js.map