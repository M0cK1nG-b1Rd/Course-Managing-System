webpackJsonp([32],{"/B+H":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("mtWM"),a=e.n(i),r=e("PJh5"),s=e.n(r),o={name:"RedisInfo",data:function(){return{loading:!0,redisInfo:[],timer:null,categoriesOne:[],dataOne:[],chartOne:"",categoriesTwo:[],dataTwo:[],chartTwo:""}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},mounted:function(){var n=this;this.getData(),this.timer=setInterval(function(){n.getData()},3e3),this.$get("redis/info").then(function(t){n.redisInfo=t.data.data})},methods:{getData:function(){var n=this;-1!==this.$route.path.indexOf("redis")&&a.a.all([this.$get("redis/keysSize"),this.$get("redis/memoryInfo")]).then(function(t){var e=t[1].data.used_memory/1e3,i=t[0].data.dbSize,a=s()().format("hh:mm:ss");n.dataOne.push(e),n.categoriesOne.push(a),n.dataTwo.push(i),n.categoriesTwo.push(a),n.dataOne.length>=6&&(n.categoriesOne.shift(),n.dataOne.shift()),n.dataTwo.length>=6&&(n.categoriesTwo.shift(),n.dataTwo.shift()),n.lineChartOne("lineChartMemory"),n.lineChartTwo("lineChartKey"),n.loading&&(n.loading=!1)}).catch(function(t){n.loading=!1,console.error(t),n.$message.error("获取Redis信息失败"),n.timer&&clearInterval(n.timer)})},lineChartOne:function(n){this.chartOne=this.$echarts.init(document.getElementById(n)),this.chartOne.setOption({color:["#1890ff","#fcc550","#1890ff","#ff9933","#fa541c","#42b983","#722ed1","#60FFF0","#52c41a","#42b983"],title:{text:"Redis内存实时占用情况（kb）",show:!0},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:!1,xAxis:{type:"category",boundaryGap:!0,data:this.categoriesOne,axisLabel:{textStyle:{fontSize:"12"}}},yAxis:{type:"value",axisLabel:{textStyle:{fontSize:"12"}}},series:[{name:"内存(kb)",data:this.dataOne,type:"line",areaStyle:{}}]},!0)},lineChartTwo:function(n){this.chartTwo=this.$echarts.init(document.getElementById(n)),this.chartTwo.setOption({color:["#f5564e","#fcc550","#1890ff","#ff9933","#fa541c","#42b983","#722ed1","#60FFF0","#52c41a","#42b983"],title:{text:"Redis key实时数量（个）",show:!0},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:!1,xAxis:{type:"category",boundaryGap:!0,data:this.categoriesTwo,axisLabel:{textStyle:{fontSize:"12"}}},yAxis:{type:"value",axisLabel:{textStyle:{fontSize:"12"}}},series:[{name:"key数量",data:this.dataTwo,type:"line",areaStyle:{}}]},!0)}}},d=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticStyle:{width:"100%","margin-top":"1rem"}},[e("a-row",{attrs:{gutter:8}},[e("a-col",{attrs:{span:12}},[e("div",{staticStyle:{height:"350px"},attrs:{id:"lineChartMemory"}})]),n._v(" "),e("a-col",{attrs:{span:12}},[e("div",{staticStyle:{height:"350px"},attrs:{id:"lineChartKey"}})])],1),n._v(" "),e("a-row",{attrs:{gutter:8}},[e("a-divider",{attrs:{orientation:"left"}},[n._v("Redis详细信息")]),n._v(" "),e("table",{staticStyle:{"border-bottom":"1px solid #f1f1f1"}},n._l(n.redisInfo,function(t,i){return e("tr",{key:i,staticStyle:{"border-top":"1px solid #f1f1f1"}},[e("td",{staticStyle:{padding:".7rem 1rem"}},[n._v(n._s(t.key))]),n._v(" "),e("td",{staticStyle:{padding:".7rem 1rem"}},[n._v(n._s(t.description))]),n._v(" "),e("td",{staticStyle:{padding:".7rem 1rem"}},[n._v(n._s(t.value))])])}),0)],1)],1)};d._withStripped=!0;var l={render:d,staticRenderFns:[]},c=l;var f=!1;var h=e("VU/8")(o,c,!1,function(n){f||e("Z2O1")},null,null);h.options.__file="src/views/monitor/RedisInfo.vue";t.default=h.exports},Z2O1:function(n,t,e){var i=e("rme2");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("22106adc",i,!1,{})},rme2:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"RedisInfo.vue",sourceRoot:""}])}});
//# sourceMappingURL=32.c1a53a29462d034da010.js.map