webpackJsonp([34],{MPqJ:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"ProjectList.vue",sourceRoot:""}])},ZVBU:function(n,e,t){var l=t("MPqJ");"string"==typeof l&&(l=[[n.i,l,""]]),l.locals&&(n.exports=l.locals);t("rjj0")("767740c8",l,!1,{})},ulsR:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"ProjectList",methods:{handleViewClick:function(n){var e=this,t=this,l=n.pid;this.$get("project/all?pid="+l).then(function(n){t.projectInfo=n.data.data[0]}),this.$get("project/all_member_info?pid="+l).then(function(n){e.memberInfo=n.data.data}),this.ViewDialogVisible=!0},handleEditClick:function(n){var e=this;this.editRow=n;var t=this,l=n.pid;this.$get("project/all?pid="+l).then(function(n){t.projectInfo=n.data.data[0]}),console.log(this.projectInfo),this.$get("project/all_member_info?pid="+l).then(function(n){e.memberInfo=n.data.data}),this.EidtDialogVisible=!0},onEditSubmit:function(n){var e=this,t=this.editRow.pid;this.EidtDialogVisible=!1,this.$put("project?pid="+t,this.projectInfo).then(function(n){e.$message.success("项目基本信息修改成功！")});for(var l=[],o=0;o<this.memberInfo.length;o++)l[o]={},l[o].sid=this.memberInfo[o].sid,l[o].position=this.memberInfo[o].position;var a={pid:t,member:l};this.$put("project/member_info?pid="+t,a).then(function(n){e.$message.success("项目成员信息修改成功！")})},handleDeleteClick:function(n){this.deleteRow=n,this.DeleteDialogVisible=!0},deleteProject:function(n){var e=this;this.$delete("project?pid="+n.pid).then(function(n){e.$message.success("该项目已成功删除！")}),this.DeleteDialogVisible=!1},removeUserBySno:function(n){for(var e=0;e<this.memberInfo.length;e++)this.memberInfo[e].sid===n&&this.memberInfo.splice(e,1)},addDialogClosed:function(){this.newMemberInfo={sid:"",position:"",tuserInfo:{name:"",class:""}}},addMemberCommit:function(n){for(var e=!1,t=0;t<this.studentInProject.length;t++)this.studentInProject[t].sid==n.sid&&(e=!0);e?this.$message.error("该学生已加入一个项目，请勿重复添加！"):(this.memberInfo.push(n),this.$message.success("添加新成员成功！")),this.addDialogVisible=!1}},data:function(){return{editRow:{},tableData:[],projectInfo:{},memberInfo:[],ViewDialogVisible:!1,EidtDialogVisible:!1,DeleteDialogVisible:!1,addDialogVisible:!1,deleteRow:{},resource:"服务器算力资源",newMemberInfo:{sid:"",position:"",tuserInfo:{name:"",class:""}},studentInProject:[],createdPid:"",positionOptions:[{value:"项目经理",label:"项目经理"},{value:"系统设计师",label:"系统设计师"},{value:"系统分析师",label:"系统分析师"},{value:"前端工程师",label:"前端工程师"},{value:"后端工程师",label:"后端工程师"},{value:"测试工程师",label:"测试工程师"},{value:"文档管理员",label:"文档管理员"},{value:"数据库管理员",label:"数据库管理员"}],classList:[],selectorInfo:[]}},mounted:function(){var n=this,e=this;this.$get("project/all").then(function(e){n.tableData=e.data.data}),this.$get("project/all_class").then(function(n){e.classList=n.data.data,e.classList=e.classList.reverse()}),this.$get("project/all_stu").then(function(n){e.selectorInfo=n.data.data}),this.$get("project/all_member_info").then(function(n){e.studentInProject=n.data.data})}},o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticStyle:{width:"100%"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData,border:""}},[t("el-table-column",{attrs:{fixed:"",prop:"pid",label:"项目ID",width:"80"}}),n._v(" "),t("el-table-column",{attrs:{prop:"projectName","show-overflow-tooltip":"",label:"项目名称",width:"160"}}),n._v(" "),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"projectDesc",label:"项目简介",width:"160"}}),n._v(" "),t("el-table-column",{attrs:{prop:"projectType",label:"类型",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"managerName",label:"项目经理",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"teacherName",label:"指导老师",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"startTime",label:"开始时间","show-overflow-tooltip":"",width:"160"}}),n._v(" "),t("el-table-column",{attrs:{prop:"endTime",label:"结束时间","show-overflow-tooltip":"",width:"160"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180px"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看项目细节",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-view",circle:""},on:{click:function(t){return n.handleViewClick(e.row)}}})],1),n._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改项目信息",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return n.handleEditClick(e.row)}}})],1),n._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除该项目",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return n.handleDeleteClick(e.row)}}})],1)]}}])})],1),n._v(" "),t("div",[t("el-dialog",{attrs:{center:"",title:"项目详细信息",visible:n.ViewDialogVisible,width:"50%"},on:{"update:visible":function(e){n.ViewDialogVisible=e}}},[t("span",[t("div",[t("el-form",{ref:"projectForm",attrs:{model:n.projectInfo,"label-width":"80px",inline:""}},[t("el-form-item",{attrs:{label:"项目名称"}},[t("el-input",{staticStyle:{width:"485px"},attrs:{disabled:""},model:{value:n.projectInfo.projectName,callback:function(e){n.$set(n.projectInfo,"projectName",e)},expression:"projectInfo.projectName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目经理"}},[t("el-input",{attrs:{disabled:""},model:{value:n.projectInfo.managerName,callback:function(e){n.$set(n.projectInfo,"managerName",e)},expression:"projectInfo.managerName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"指导老师"}},[t("el-input",{attrs:{disabled:""},model:{value:n.projectInfo.teacherName,callback:function(e){n.$set(n.projectInfo,"teacherName",e)},expression:"projectInfo.teacherName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目类型"}},[t("el-input",{attrs:{disabled:""},model:{value:n.projectInfo.projectType,callback:function(e){n.$set(n.projectInfo,"projectType",e)},expression:"projectInfo.projectType"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"特殊资源"}},[t("el-input",{attrs:{disabled:""},model:{value:n.resource,callback:function(e){n.resource=e},expression:"resource"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"date",disabled:"",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:n.projectInfo.startTime,callback:function(e){n.$set(n.projectInfo,"startTime",e)},expression:"projectInfo.startTime"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{staticStyle:{width:"195px"},attrs:{type:"date",disabled:"",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:n.projectInfo.endTime,callback:function(e){n.$set(n.projectInfo,"endTime",e)},expression:"projectInfo.endTime"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目描述"}},[t("el-input",{staticStyle:{width:"485px"},attrs:{type:"textarea",disabled:""},model:{value:n.projectInfo.projectDesc,callback:function(e){n.$set(n.projectInfo,"projectDesc",e)},expression:"projectInfo.projectDesc"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目成员"}},[t("div",[t("el-row",[t("el-table",{attrs:{data:n.memberInfo,border:"",stripe:"",disabled:""}},[t("el-table-column",{attrs:{label:"姓名",prop:"tuserInfo.name",width:"100px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"班级",prop:"tuserInfo.class",width:"100px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"学号",prop:"sid",width:"135px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"岗位",prop:"position",width:"150px",align:"center"}})],1)],1)],1)])],1)],1)]),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.ViewDialogVisible=!1}}},[n._v("确 定")])],1)])],1),n._v(" "),t("el-dialog",{attrs:{title:"修改项目信息",visible:n.EidtDialogVisible,width:"60%",center:""},on:{"update:visible":function(e){n.EidtDialogVisible=e}}},[t("div",[t("el-form",{ref:"projectForm",attrs:{model:n.projectInfo,"label-width":"80px",inline:""}},[t("el-form-item",{attrs:{label:"项目名称"}},[t("el-input",{staticStyle:{width:"565px"},model:{value:n.projectInfo.projectName,callback:function(e){n.$set(n.projectInfo,"projectName",e)},expression:"projectInfo.projectName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目经理"}},[t("el-input",{staticStyle:{width:"235px"},model:{value:n.projectInfo.managerName,callback:function(e){n.$set(n.projectInfo,"managerName",e)},expression:"projectInfo.managerName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"指导老师"}},[t("el-input",{staticStyle:{width:"235px"},model:{value:n.projectInfo.teacherName,callback:function(e){n.$set(n.projectInfo,"teacherName",e)},expression:"projectInfo.teacherName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目类型"}},[t("el-input",{staticStyle:{width:"235px"},model:{value:n.projectInfo.projectType,callback:function(e){n.$set(n.projectInfo,"projectType",e)},expression:"projectInfo.projectType"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"特殊资源"}},[t("el-input",{staticStyle:{width:"235px"},model:{value:n.resource,callback:function(e){n.resource=e},expression:"resource"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{staticStyle:{width:"235px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:n.projectInfo.startTime,callback:function(e){n.$set(n.projectInfo,"startTime",e)},expression:"projectInfo.startTime"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{staticStyle:{width:"235px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:n.projectInfo.endTime,callback:function(e){n.$set(n.projectInfo,"endTime",e)},expression:"projectInfo.endTime"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目描述"}},[t("el-input",{staticStyle:{width:"565px"},attrs:{type:"textarea"},model:{value:n.projectInfo.projectDesc,callback:function(e){n.$set(n.projectInfo,"projectDesc",e)},expression:"projectInfo.projectDesc"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目成员"}},[t("div",[t("el-table",{attrs:{data:n.memberInfo,border:"",stripe:""}},[t("el-table-column",{attrs:{label:"姓名",prop:"tuserInfo.name",width:"110px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"班级",prop:"tuserInfo.class",width:"110px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"学号",prop:"sid",width:"135px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"岗位",prop:"position",width:"160px",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130px",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(e){n.addDialogVisible=!0}}}),n._v(" "),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(t){return n.removeUserBySno(e.row.sid)}}})]}}])})],1)],1)])],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.EidtDialogVisible=!1}}},[n._v("取消修改")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return n.onEditSubmit()}}},[n._v("保存修改")])],1)]),n._v(" "),t("el-dialog",{attrs:{title:"注意",visible:n.DeleteDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){n.DeleteDialogVisible=e}}},[t("span",[n._v("  项目删除后不可恢复，请谨慎操作！")]),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.DeleteDialogVisible=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"warning"},on:{click:function(e){return n.deleteProject(n.deleteRow)}}},[n._v("确 定")])],1)]),n._v(" "),t("el-dialog",{attrs:{title:"添加新成员",visible:n.addDialogVisible,width:"30%"},on:{"update:visible":function(e){n.addDialogVisible=e},close:n.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:n.newMemberInfo,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"班级",prop:"class"}},[t("el-select",{attrs:{placeholder:"选择成员所在班级",clearable:"",size:"medium"},model:{value:n.newMemberInfo.tuserInfo.class,callback:function(e){n.$set(n.newMemberInfo.tuserInfo,"class",e)},expression:"newMemberInfo.tuserInfo.class"}},n._l(n.classList,function(n){return t("el-option",{key:n.class,attrs:{label:n.class,value:n.class}})}),1)],1),n._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-select",{attrs:{placeholder:"选择成员姓名",clearable:"",size:"medium"},model:{value:n.newMemberInfo.tuserInfo.name,callback:function(e){n.$set(n.newMemberInfo.tuserInfo,"name",e)},expression:"newMemberInfo.tuserInfo.name"}},n._l(n.selectorInfo,function(e){return n.newMemberInfo.tuserInfo.class==e.class?t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}}):n._e()}),1)],1),n._v(" "),t("el-form-item",{attrs:{label:"学号",prop:"sid"}},[t("el-select",{attrs:{placeholder:"成员学号",clearable:"",size:"medium"},model:{value:n.newMemberInfo.sid,callback:function(e){n.$set(n.newMemberInfo,"sid",e)},expression:"newMemberInfo.sid"}},n._l(n.selectorInfo,function(e){return n.newMemberInfo.tuserInfo.name==e.name?t("el-option",{key:e.sid,attrs:{label:e.sid,value:e.sid}}):n._e()}),1)],1),n._v(" "),t("el-form-item",{attrs:{label:"角色",prop:"position"}},[t("el-select",{attrs:{placeholder:"可通过输入创建新选项","allow-create":"",filterable:"",clearable:"",size:"medium"},model:{value:n.newMemberInfo.position,callback:function(e){n.$set(n.newMemberInfo,"position",e)},expression:"newMemberInfo.position"}},n._l(n.positionOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.addDialogVisible=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return n.addMemberCommit(n.newMemberInfo)}}},[n._v("确 定")])],1)],1)],1)};o._withStripped=!0;var a={render:o,staticRenderFns:[]},i=a;var r=!1;var s=t("VU/8")(l,i,!1,function(n){r||t("ZVBU")},"data-v-4c62579d",null);s.options.__file="src/views/project/view/ProjectList.vue";e.default=s.exports}});
//# sourceMappingURL=34.574fa7b35a3e1f502b06.js.map